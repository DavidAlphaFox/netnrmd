<!DOCTYPE html>
<html>
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />

    <link rel="shortcut icon" href="favicon.ico" type="image/x-icon" />

    <title>netnrmd</title>

    <meta name="keywords" content="netnr,NET牛人,markdown,netnrmd" />
    <meta name="description" content="netnrmd 组合编辑器，Monaco Editor 编辑器 + Marked 解析 + highlight 代码高亮" />

</head>
<body>
    <div>
        <center>
            <h1>netnrmd</h1>
            <p>
                <span>
                    &nbsp;<a href="https://github.com/netnr/netnrmd">GitHub</a>
                    &nbsp;<a href="https://gitee.com/netnr/netnrmd">Gitee</a>
                </span>
                <small>netnrmd编辑器（Monaco Editor 编辑器 + Marked 解析 + highlight 代码高亮）</small>
            </p>
        </center>
        <div>
            <div id="editor"></div>
        </div>
    </div>

    <script src="https://lib.baomitu.com/marked/0.7.0/marked.min.js"></script>
    <script src="https://lib.baomitu.com/jquery/3.3.1/jquery.slim.min.js"></script>
    <script src="https://code.bdstatic.com/npm/monaco-editor@0.17.0/min/vs/loader.js"></script>
    <script src="https://lib.baomitu.com/highlight.js/9.12.0/highlight.min.js" defer async></script>

    <link href="src/netnrmd.css?2.1.0" rel="stylesheet" />
    <script src="/src/netnrmd.js?2.1.0"></script>
    <script>
        require.config({
            paths: { vs: "https://code.bdstatic.com/npm/monaco-editor@0.17.0/min/vs" },
            'vs/nls': { availableLanguages: { '*': 'zh-cn' } }
        });

        require(['vs/editor/editor.main'], function () {

            window.nmd = new netnrmd('#editor');

            //加载默认值
            var lsmd = localStorage.getItem("netnrmd_markdown");
            if (!(lsmd || lsmd.trim() != "")) {
                fetch('https://md.netnr.com/README.md').then(function (res) {
                    if (res.status == 200) {
                        res.text().then(function (md) {
                            nmd.setmd(md);
                        })
                    }
                })
            }

            $(window).on('load resize', function () {
                var vh = $(window).height() - nmd.obj.container.offset().top - 15;
                nmd.height(Math.max(100, vh));
            })
        });
    </script>
</body>
</html>